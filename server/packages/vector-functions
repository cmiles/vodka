v2:~(|package @vector ~(_bind @add-3d &" vecs..."(|~(_let @do-add &" v1 v2"(|~(_let @sumx ~(_::pl:: @<`x`>v1 @<`x`>v2_)_) ~(_let @sumy ~(_::pl:: @<`y`>v1 @<`y`>v2_)_) ~(_let @sumz ~(_::pl:: @<`z`>v1 @<`z`>v2_)_) ~(_instantiate ^<`Vector3d`> @sumx @sumy @sumz_)|)_) ~(_let @rec-add &" lst"(|~(|if ~(_is-empty @lst_) ~(_instantiate ^<`Vector3d`> %0 %0 %0_) ~(_do-add ~(_first @lst_) ~(_rec-add ~(_rest @lst_)_)_)|)|)_) ~(_rec-add @vecs_)|)_) ~(_template ^<`Vector3d`> (|%<`y`>0 %<`x`>0 %<`z`>0 &" newx%"(|<`set-x`>~(_set @<`x`>self @newx_)|) &" newy%"(|<`set-y`>~(_set @<`y`>self @newy_)|) &" newz%"(|<`set-z`>~(_set @<`z`>self @newz_)|) &(|<`magnitude`>~(_square-root ~(|::pl:: ~(_power @<`x`>self %2_) ~(_power @<`y`>self %2_) ~(_power @<`z`>self %2_)|)_)|) &" x y z"(|<`:init`>~(_@<`set-x`>self @x_) ~(_@<`set-y`>self @y_) ~(_@<`set-z`>self @z_)|) &" vec"(|<`add`>~(_let @sumx ~(_::pl:: @<`x`>vec @<`x`>self_)_) ~(_let @sumy ~(_::pl:: @<`y`>vec @<`y`>self_)_) ~(_let @sumz ~(_::pl:: @<`z`>vec @<`z`>self_)_) ~(_instantiate ^<`Vector3d`> @sumx @sumy @sumz_)|) &" s%"(|<`scale`>~(|instantiate ^<`Vector3d`> ~(_::ti:: @<`x`>self @s_) ~(_::ti:: @<`y`>self @s_) ~(_::ti:: @<`z`>self @s_)|)|)|)_) ~(_template ^<`Vector`> (|%<`y`>0 %<`x`>0 &" newx%"(|<`set-x`>~(_set @<`x`>self @newx_)|) &" newy%"(|<`set-y`>~(_set @<`y`>self @newy_)|) &" theta%"(|<`rotate`>~(_let @newx ~(_- ~(_::ti:: @<`x`>self ~(_cos @theta_)_) ~(_::ti:: @<`y`>self ~(_sin @theta_)_)_)_) ~(_let @newy ~(_::pl:: ~(_::ti:: @<`x`>self ~(_sin @theta_)_) ~(_::ti:: @<`y`>self ~(_cos @theta_)_)_)_) ~(_instantiate ^<`Vector`> @newx @newy_)|) &" vec"(|<`add`>~(_let @sumx ~(_::pl:: @<`x`>vec @<`x`>self_)_) ~(_let @sumy ~(_::pl:: @<`y`>vec @<`y`>self_)_) ~(_instantiate ^<`Vector`> @sumx @sumy_)|) &(|<`magnitude`>~(_square-root ~(_::pl:: ~(_power @<`x`>self %2_) ~(_power @<`y`>self %2_)_)_)|) &" x y"(|<`:init`>~(_@<`set-x`>self @x_) ~(_@<`set-y`>self @y_)|)|)_)|)